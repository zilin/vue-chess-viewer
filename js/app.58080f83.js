(function(t){function e(e){for(var o,s,a=e[0],u=e[1],c=e[2],f=0,l=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&l.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);h&&h(e);while(l.length)l.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var h=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v("Demo Chessboard Viewer")]),n("div",[t._v("Fen: "+t._s(t.currentFen))]),n("ChessViewer",{attrs:{fen:t.currentFen}})],1)},i=[],s=(n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blue merida"},[n("div",{ref:"board",staticClass:"cg-board-wrap"}),n("div",{ref:"boardButtons",staticClass:"default buttons"},[n("i",{staticClass:"default button fa fa-adjust",on:{click:function(e){return t.board.toggleOrientation()}}}),n("i",{staticClass:"default button fa fa-power-off",on:{click:function(e){return t.reset()}}}),n("i",{staticClass:"default button fa fa-undo",on:{click:function(e){return t.undo()}}})]),n("div",{ref:"boardMoves",staticClass:"moves"},t._l(t.history,(function(e,o){return n("span",{key:e,staticClass:"move"},[n("span",{staticClass:"move"},[t._v(t._s(o)+".")]),n("a",[t._v(t._s(e))]),n("span",{staticClass:"comment"})])})),0)])}),a=[],u=(n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("2532"),n("159b"),n("2909")),c=n("b85c"),h=n("c5ad"),f=n.n(h),l=n("0a8e");n("c975");function p(t){var e=t.filter((function(t,e,n){return e===n.indexOf(t)}));return e}var d={name:"ChessViewer",props:{fen:{type:String,default:""},free:{type:Boolean,default:!1},showThreats:{type:Boolean,default:!1},onPromotion:{type:Function,default:function(){return"q"}},orientation:{type:String,default:"white"}},data:function(){return{history:[],initial_turn:"w"}},watch:{fen:function(t){this.fen=t,this.loadPosition(),this.initial_turn=this.game.turn()},orientation:function(t){this.orientation=t,this.loadPosition()},showThreats:function(t){this.showThreats=t,this.showThreats&&this.paintThreats()}},methods:{reset:function(){this.game.load(this.fen),this.redraw()},undo:function(){this.game.undo(),this.redraw()},possibleMoves:function(){var t=this,e={};return this.game.SQUARES.forEach((function(n){var o=t.game.moves({square:n,verbose:!0});o.length&&(e[n]=o.map((function(t){return t.to})))})),e},opponentMoves:function(){var t=this.game.pgn(),e=this.game.fen().split(" ");e[1]="w"===e[1]?"b":"w",e=e.join(" ");var n=this.game.load(e);if(n){var o=this.game.moves({verbose:!0});return this.game.load_pgn(t),o}return[]},toColor:function(){return"w"===this.game.turn()?"white":"black"},paintThreats:function(){var t=this.game.moves({verbose:!0}),e=[];t.forEach((function(t){e.push({orig:t.to,brush:"yellow"}),t["captured"]&&e.push({orig:t.from,dest:t.to,brush:"red"}),t["san"].includes("+")&&e.push({orig:t.from,dest:t.to,brush:"blue"})})),this.board.setShapes(e)},calculatePromotions:function(){var t=this.game.moves({verbose:!0});this.promotions=[];var e,n=Object(c["a"])(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.promotion&&this.promotions.push(o)}}catch(r){n.e(r)}finally{n.f()}},isPromotion:function(t,e){var n=this.promotions.filter((function(n){return n.from===t&&n.to===e}));return n.length>0},changeTurn:function(){var t=this;return function(e,n){t.isPromotion(e,n)&&(t.promoteTo=t.onPromotion()),t.game.move({from:e,to:n,promotion:t.promoteTo}),t.redraw()}},afterMove:function(){this.showThreats&&this.paintThreats();var t=this.countThreats(this.toColor())||{};t["history"]=this.game.history(),t["fen"]=this.game.fen(),this.history=this.convertHistory(this.game.history()),this.$emit("onMove",t)},countThreats:function(t){var e={},n=0,o=0,r=this.game.moves({verbose:!0});return t!==this.toColor()&&(r=this.opponentMoves()),0===r.length?null:(r.forEach((function(t){t["captured"]&&n++,t["san"].includes("+")&&o++})),e["legal_".concat(t)]=p(r.map((function(t){return t.from+t.to}))).length,e["checks_".concat(t)]=o,e["threat_".concat(t)]=n,e["turn"]=t,e)},redraw:function(){this.board.set({fen:this.game.fen(),turnColor:this.toColor(),movable:{color:this.toColor(),dests:this.possibleMoves()}}),this.calculatePromotions(),this.afterMove()},loadPosition:function(){this.game.load(this.fen),this.board=Object(l["Chessground"])(this.$refs.board,{fen:this.game.fen(),turnColor:this.toColor(),movable:{color:this.toColor(),free:this.free,dests:this.possibleMoves()},orientation:this.orientation}),this.board.set({movable:{events:{after:this.changeTurn()}}}),this.afterMove()},convertHistory:function(t){var e=[];"b"===this.initial_turn&&e.push("..."),e.push.apply(e,Object(u["a"])(t));for(var n=[],o=0;o<e.length;o+=2)o<e.length-1?n.push(e[o]+" "+e[o+1]):n.push(e[o]);return n}},mounted:function(){this.loadPosition(),this.initial_turn=this.game.turn()},created:function(){this.game=new f.a,this.board=null,this.promotions=[],this.promoteTo="q"}},v=d,m=n("2877"),b=Object(m["a"])(v,s,a,!1,null,null,null),g=b.exports,w={name:"App",components:{ChessViewer:g},data:function(){return{currentFen:""}},methods:{loadFen:function(t){this.currentFen=t}},created:function(){var t=window.location.href.split("?");2===t.length?this.currentFen=decodeURI(t[1]):this.currentFen="3rkb1r/5pp1/p1Pp3p/1pnN1P2/8/4P3/P5PP/R4Rq1 w - - 0 1",this.fens=["3rkb1r/5pp1/p1Pp3p/1pnN1P2/8/4P3/P5PP/R4Rq1 w - - 0 28","5rk1/3r1p2/p5pp/1p2p3/2Bn4/1P4QP/5PP1/5RK1 w - - 0 28","4r1k1/2RR2p1/p7/1p5p/6n1/1P3NPq/P4P2/6K1 w - - 0 28","5rk1/pb1n1p2/1p2pP2/4R3/1p3P2/3P4/P1r1B1p1/5RK1 w - - 0 28"]}},P=w,y=(n("034f"),Object(m["a"])(P,r,i,!1,null,null,null)),_=y.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(_)}}).$mount("#app")},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.58080f83.js.map